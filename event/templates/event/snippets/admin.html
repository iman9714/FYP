{% load static %}
{% load crispy_forms_tags %}
<aside class="col-sm-9">

  <div class="card m-auto border-bottom shadow sm">
       <img class="card-img-top" src="" >

       <div class="card-body mt-2 mb-2">
         <div><a class="card-title">{{events.title}}</a>
           <div style="text-align: right;">
             <form method="post" action="{% url 'detail' events.id %} ">
               {% csrf_token %}
                  <button name="unjoin-event" type="submit" class="btn btn-primary">Unjoin</button>
                  <button name="join-event" type="submit" class="btn btn-primary">Join Event</button>
                  <button name="delete-event"  class="btn btn-danger">Delete Event</button>
             </form>
             <button data-toggle="modal" data-target="#editevent" class="btn btn-warning">Edit Detail</button>

           </div>


           Date: {{events.start_date}}<br>
           Until: {{events.start_date}}<br>
           Time: {{events.start_time}} ~ {{events.end_time}}<br>
           Location: {{events.location}}<br>

           <h6> Volunteer List: </h6>
           {% for hu in events.user_id.all %}
                {{hu}}<br>
           {% endfor %}
         </div>
       </div>

       <div class="card-footer">
           <a href="" data-toggle="modal" data-target="#addactivity"><img src="{% static 'add.svg' %}" style="float:right;" width="25" height="25"></a>
           <h5 style="text-align: center;">Activities</h5>
       </div>

       {% for activity in events.activity.all %}
          <div class="card-footer">
              <h6> {{activity.title}} </h6>
              <p>{{activity.category}} </p>
              <p>{{activity.description}} </p>
              <p>{{activity.collaboration}} </p>
          </div>
       {% endfor %}

       <div class="card-footer">
           <a href="" data-toggle="modal" data-target="#addlogistic"><img src="{% static 'add.svg' %}" style="float:right;" width="25" height="25"></a>
           <h5 style="text-align: center;">Logistic</h5>
       </div>

       {% for log in logistic %}
          <div class="card-footer">
            <h6>Task : {{log.task}} </h6>
            {% for x in log.user_id.all %}
            <h6>In-Charge : {{x}}</h6>
            {% endfor %}
          </div>
       {% endfor %}
    </div>
</aside>


<aside class="col-sm-3" >
  <div class="card m-auto border-bottom shadow sm">
  <header class="card-header">
    <h6 class="title">Recommended Volunteers </h6>
  </header>
  <div class="list-group list-group-flush">
    {% for list in rec_id%}
      {% for x in users  %}
        {% if list == x.id %}
          <a href="{% url 'view_volunteer_profile' x.id %}"  class="list-group-item" target="blank"> {{x.username}} </a>
        {% endif %}
      {% endfor %}
    {% endfor %}
  </div>
  </div>
</aside>




<!--activity model---------------------------------------------------------------------------------->

<div class="modal fade bd-example-modal-lg" id="addactivity" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="basicinformationTitle">Add Activity</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form method="post" action="{% url 'detail' events.id %} ">
        <div class="modal-body">
        {% csrf_token %}
        {{activity_form| crispy}}

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button name="add_activity" type="submit" value="Submit" class="btn btn-primary">Create</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade bd-example-modal-lg" id="addlogistic" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="basicinformationTitle">Add Logistic Team</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form method="post" action="{% url 'detail' events.id %} ">
        <div class="modal-body">
        {% csrf_token %}
        {{logistic_form|crispy}}

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button name="add_logistic" type="submit" value="Submit" class="btn btn-primary">Create</button>
        </div>
      </form>
    </div>
  </div>
</div>


<div class="modal fade bd-example-modal-lg" id="editevent" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="basicinformationTitle">Edit Event Information</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form method="post" action="{% url 'detail' events.id %} ">
        <div class="modal-body">
        {% csrf_token %}
        {{event_edit|crispy}}

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button name="edit-event" type="submit" value="Submit" class="btn btn-primary">Update</button>
        </div>
      </form>
    </div>
  </div>
</div>
